name: YAML M09ç²¾éˆ

on:
  workflow_dispatch:

jobs:
  fetch_issues_and_create_m09:
    runs-on: ubuntu-latest

    steps:
      - name: æª¢æŸ¥ä¸¦æ‹‰å–ç¨‹å¼ç¢¼
        uses: actions/checkout@v3

      - name: å®‰è£å·¥å…·
        run: |
          echo "ğŸ”§ å®‰è£ jq èˆ‡ curl"
          sudo apt-get update
          sudo apt-get install -y jq curl

      - name: å•Ÿå‹• YAML M09ç²¾éˆ
        run: echo "ğŸš€ YAML M09ç²¾éˆå•Ÿå‹•ä¸­...æ­£åœ¨è™•ç†ä»»å‹™æ¸…å–® 823 ä»»å‹™æ¸…å–®.md"

      - name: æŠ“å– GitHub Issue æƒ…å ±
        run: |
          echo "ğŸ“¥ YAML M09ç²¾éˆæ­£åœ¨æŠ“å– GitHub Issue æƒ…å ±..."
          curl -s https://api.github.com/repos/op021/Quantum-Cola-s-Digital-Life/issues \
            | jq '[.[] | {æ¨™é¡Œ: .title, ç·¨è™Ÿ: .number, ç‹€æ…‹: .state, æ¨™ç±¤: [.labels[].name]}]' \
            > M09.json

      - name: é©—è­‰ M09.json æ˜¯å¦æˆåŠŸç”Ÿæˆ
        run: |
          if [ -s M09.json ]; then
            echo "âœ… YAML M09ç²¾éˆä»»å‹™å®Œæˆï¼ŒM09.json å·²æˆåŠŸç”Ÿæˆ"
          else
            echo "âŒ YAML M09ç²¾éˆå¤±æ•—ï¼šæœªæˆåŠŸç”Ÿæˆ M09.json"
            exit 1
          fi

      - name: ä¸Šå‚³æƒ…å ±æª”æ¡ˆè‡³ GitHub
        uses: actions/upload-artifact@v3
        with:
          name: M09-æƒ…å ±æª”æ¡ˆ
          path: M09.json
